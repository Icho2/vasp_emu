#!/usr/bin/env python3
# Here we will read the INCAR file and decide what the user wants to run. It will be the one and only executable all users run.
import subprocess

from vasp_emu.vasp import read_incar

#read incar
incar = read_incar()

if incar['ichain'] == 0: #NEB
    from vasp_emu.neb.calculate import calculate
    calculate(incar)

elif incar['ibrion'] == 3 and incar['ichain'] == 2 and incar['potim'] == 0: #Dimer
    from vasp_emu.dimer.calculate import test_dimer_method
    test_dimer_method(incar)

elif incar['ibrion'] == 1 or incar['ibrion'] == 2 or incar['ibrion'] == 3: # geometry_relaxation
    from vasp_emu.geom_opt.calculate import calculate
    calculate(incar)

elif incar['ibrion'] == 0: #MD
    from vasp_emu.md.calculate import calculate
    calculate(incar)
    
else:
    print('Fix emulate tag')
